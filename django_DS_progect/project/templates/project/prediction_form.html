<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Прогнозування відтоку клієнтів</title>
    {% load static %}
    <link href="{% static 'images/favicon2.webp' %}" rel="shortcut icon" type="image/x-icon" />
    <link rel="stylesheet" href="{% static 'css/style.min.css' %}" />
</head>
<body>
    <div class="content">
        <form id="prediction-form" method="POST" action="{% url 'predict_view' %}">
            {% csrf_token %}
            <div class="form-inner">
                <legend>Прогнозування відтоку клієнтів</legend>
                {{ form.as_p }}
                <button type="submit" style="background-color: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px;">Отримати прогноз</button>
                <button type="button" id="reset-button" style="background-color: #f44336; color: white; padding: 10px 20px; border: none; border-radius: 5px;">Сгенерувати ще раз</button>
            </div>
        </form>

        {% if prediction %}
        <div id="result">
            <h2>Результат прогнозу:</h2>
            <p>{{ prediction }}</p>
            <p>Ймовірність: {{ probability }}%</p>
        </div>
        {% endif %}
        
        {% if errors %}
        <div>
            <h3>Помилки валидації:</h3>
            <ul>
                {% for field, error_list in errors.items %}
                    <li>{{ field }}: {{ error_list|join:", " }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
    </div>

    <script>
        document.getElementById('reset-button').addEventListener('click', function() {
            // Очистить форму
            document.querySelector('#prediction-form').reset();
            
            // Удалить результаты
            const resultDiv = document.getElementById('result'); // Изменено на выбор по id
            if (resultDiv) {
                resultDiv.remove(); // Удаляем блок с результатом
            }
        });
    </script>
</body>
</html>
